define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],function(r,a,n,i){return function(l){function e(e){for(var t,r,a=e[0],n=e[1],i=e[2],o=0,s=[];o<a.length;o++)r=a[o],Object.prototype.hasOwnProperty.call(d,r)&&d[r]&&s.push(d[r][0]),d[r]=0;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(l[t]=n[t]);for(f&&f(e);s.length;)s.shift()();return c.push.apply(c,i||[]),u()}function u(){for(var e,t=0;t<c.length;t++){for(var r=c[t],a=!0,n=1;n<r.length;n++){var i=r[n];0!==d[i]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=r[0]))}return e}var r={},d={6:0},c=[];function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=l,o.c=r,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",Object.defineProperty(o,"p",{get:function(){try{if("function"!=typeof getChunkURL)throw new Error("WebpackRequireFrom: 'getChunkURL' is not a function or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return getChunkURL()}catch(e){return""}}});var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var n=0;n<t.length;n++)e(t[n]);var f=a;return c.push([196,2,3,1,0]),u()}({103:function(e,t,r){"use strict";r(7),r(12),r(147),Object.defineProperty(t,"__esModule",{value:!0}),t.setPGCSRFToken=function(a,n){if(!n)throw"csrf-token meta tag has not been set";var i=l.default.sync;l.default.sync=function(e,t,r){return r.beforeSend=function(e){e.setRequestHeader(a,n)},i(e,t,r)};var o=l.default.get;l.default.get=function(e,t,r){return r.beforeSend=function(e){e.setRequestHeader(a,n)},o(e,t,r)},s.default.ajaxSetup({beforeSend:function(e){e.setRequestHeader(a,n)}}),u.default.interceptors.request.use(function(e){return e.headers[a]=n,e},function(e){return Promise.reject(e)})};var s=a(r(0)),l=a(r(14)),u=a(r(70));function a(e){return e&&e.__esModule?e:{default:e}}},119:function(e,g,p){"use strict";(function(o){p(30),p(43),p(44),p(53),p(10),p(58),p(19),p(22),p(18),p(144),p(75),p(7),p(29),p(76),p(48),p(12),p(4),p(23),p(8),p(26),p(83),p(63),p(21),p(6),Object.defineProperty(g,"__esModule",{value:!0}),g.isValidTreeNodeData=g.Tree=g.TreeNode=void 0;var e,t=p(24),s=(e=p(0))&&e.__esModule?e:{default:e};function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var d=function(){function n(e,t,r,a){i(this,n),this.id=e,this.data=t,this.setParent(a),this.children=[],this.domNode=r}return r(n,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,null!=e&&void 0!==e.path&&(this.path=e.path+"."+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"reload",value:function(e){var t=this;this.unload(e),e.aciTreeApi.setInode(this.domNode),e.aciTreeApi.deselect(this.domNode),setTimeout(function(){e.selectNode(t.domNode)},0)}},{key:"unload",value:function(e){this.children=[],e.aciTreeApi.unload(this.domNode)}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(e(t=t.parent()))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}}]),n}();g.TreeNode=d;var c=function(){function e(){i(this,e),this.rootNode=new d(void 0,{}),this.aciTreeApi=void 0,this.draggableTypes={}}return r(e,[{key:"registerDraggableType",value:function(t,e){var r=this,a=1<arguments.length&&void 0!==e?e:null;"object"==n(t)?Object.keys(t).forEach(function(e){r.registerDraggableType(e,t[e])}):null!=a&&t.replace(/ +/," ").split(" ").forEach(function(e){r.draggableTypes[e]=a})}},{key:"getDraggable",value:function(e){return this.draggableTypes[e]?this.draggableTypes[e]:null}},{key:"prepareDraggable",value:function(a,n){var i=this.getDraggable(a._type);null!=i&&n.find(".aciTreeItem").attr("draggable",!0)[0].addEventListener("dragstart",function(e){var t=i(a,n);if("string"==typeof t?t={text:t,cur:{from:t.length,to:t.length}}:t.cur||(t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(r,!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t,{cur:{from:t.text.length,to:t.text.length}})),e.dataTransfer.setData("text",JSON.stringify(t)),e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="move"),e.dataTransfer.setDragImage){var r=(0,s.default)('\n              <div class="drag-tree-node">\n                <span>'.concat(o.escape(t.text),"</span>\n              </div>"));(0,s.default)("body .drag-tree-node").remove(),(0,s.default)("body").append(r),e.dataTransfer.setDragImage(r[0],0,0)}})}},{key:"addNewNode",value:function(e,t,r,a){var n=this.findNode(a);return this.createOrUpdateNode(e,t,n,r)}},{key:"findNode",value:function(e){return null==e||0===e.length?this.rootNode:function(e,i){return null!==i?function e(t){if(void 0!==t.path&&void 0!==i&&!i.startsWith(t.path))return null;for(var r=0,a=t.children.length;r<a;r++){var n=e(t.children[r]);if(null!==n)return n}return t.path===i?t:null}(e):e}(this.rootNode,e.join("."))}},{key:"findNodeByDomElement",value:function(e){var t=this.translateTreeNodeIdFromACITree(e);if(t&&t[0])return this.findNode(t)}},{key:"selected",value:function(){return this.aciTreeApi.selected()}},{key:"selectNode",value:function(e){this.aciTreeApi.select(e)}},{key:"createOrUpdateNode",value:function(e,t,r,a){var n=[e];null!=r&&(n=[r.path,e]);var i=this.findNode(n);if(null!==i)return i.data=t,i;var o=new d(e,t,a,r);return r===this.rootNode&&(o.parentNode=null),r.children.push(o),o}},{key:"register",value:function(e){e.on("acitree",function(e,t,r,a){if(t.isItem(r)&&("added"===a||"idset"===a)){var n=t.getId(r),i=t.itemData(r);"added"===a&&this.prepareDraggable(i,r);var o=this.translateTreeNodeIdFromACITree(t.parent(r));this.addNewNode(n,i,r,o)}}.bind(this)),this.aciTreeApi=e.aciTree("api")}},{key:"translateTreeNodeIdFromACITree",value:function(e){for(var t=e,r=[];null!=t&&0<t.length&&(r.unshift(this.aciTreeApi.getId(t)),this.aciTreeApi.hasParent(t));)t=this.aciTreeApi.parent(t);return r}}]),e}();g.Tree=c;var f=t.isValidData;g.isValidTreeNodeData=f}).call(this,p(1))},121:function(e,t,r){"use strict";r(122),r(11),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=function(e,t){l=e,n.default.each(u,function(e){c(e)}),n.default.each(d,function(e){c(e)}),e.on(t.EVENT.BUTTON,function(e){"name"in e&&e.name===(0,a.default)("Query Tool")?i.default.DataGrid.show_query_tool("",i.default.Browser.tree.selected()):"name"in e&&e.name===(0,a.default)("View Data")?i.default.DataGrid.show_data_grid({mnuid:3},i.default.Browser.tree.selected()):"name"in e&&e.name===(0,a.default)("Filtered Rows")&&i.default.DataGrid.show_filtered_row({mnuid:4},i.default.Browser.tree.selected())})},t.enable=function(e,t){e in s?l.buttonEnable(e,t):console.warn("Developer warning: No tool button found with label: "+e)};var a=o(r(2)),n=o(r(1)),i=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}var s={},l=null,u=[{label:(0,a.default)("Filtered Rows"),btnClass:"fa fa-filter",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1},{label:(0,a.default)("View Data"),btnClass:"fa fa-table",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1},{label:(0,a.default)("Query Tool"),btnClass:"fa fa-bolt",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:!1}],d=[];function c(e){e.label in s&&!(n.default.findIndex(l._buttonList,{name:e.label})<0)||(l.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled),s[e.label]=e)}},124:function(e,t){e.exports=n},125:function(e,t,r){"use strict";r(10),r(18),r(7),r(6);var s=a(r(0)),n=a(r(105)),l=r(24);function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function a(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.dialogContainer=e,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs"),0<this.tabs.length&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,l.parseShortcutValue)(t),this.dialogTabForward=(0,l.parseShortcutValue)(r),(0,n.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,n.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}return function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)}(a,[{key:"onKeyboardEvent",value:function(e,t){var r=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first"),a=this.isActivePaneHasChildTabs(r);this.tabSwitching||(this.tabSwitching=!0,a&&this.navigate(t,a.childTab,a.childTabPane,e)||this.navigate(t,this.tabs,r,e))}},{key:"isActivePaneHasChildTabs",value:function(e){var t=e.find(".nav-tabs:first");return 0<t.length?{childTab:t,childTabPane:e.find(".tab-content:first > .tab-pane.active:first")}:null}},{key:"navigate",value:function(e,t,r,a){return e==this.dialogTabBackward?this.navigateBackward(t,r,a):e==this.dialogTabForward&&this.navigateForward(t,r,a)}},{key:"navigateBackward",value:function(e,t,r){var a,n,i=this,o=(0,s.default)(e).find("li").has("a.active").prev("li");return 0<o.length?(o.find("a").tab("show"),0<(n=(a=t.prev()).find(".tab-content:first > .tab-pane.active:first")).length?(0,l.findAndSetFocus)(n):(0,l.findAndSetFocus)(a),setTimeout(function(){i.tabSwitching=!1},200),r.stopPropagation(),!0):this.tabSwitching=!1}},{key:"navigateForward",value:function(e,t,r){var a,n,i=this,o=(0,s.default)(e).find("li").has("a.active").next("li");return 0<o.length?(o.find("a").tab("show"),0<(n=(a=t.next()).find(".tab-content:first > .tab-pane.active:first")).length?(0,l.findAndSetFocus)(n):(0,l.findAndSetFocus)(a),setTimeout(function(){i.tabSwitching=!1},200),r.stopPropagation(),!0):this.tabSwitching=!1}},{key:"detach",value:function(){(0,n.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,n.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}]),a}();e.exports={dialogTabNavigator:o}},146:function(e,t,r){"use strict";r(7),r(4),r(8),Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=function(e,t,r){var a=Math.floor(r/1e4),n=Math.floor(r/100)-100*a,i="";i=10<=a?e.replace("$VERSION$",a):e.replace("$VERSION$",a+"."+n);"/"!=i.substr(-1)&&(i+="/");return i+t}},151:function(e,t,r){"use strict";r(35);var a,s=(a=r(1))&&a.__esModule?a:{default:a};e.exports={generate_url:function(e,t,r,a,n,i){var o="";return s.default.each(s.default.sortBy(s.default.pick(t,n),function(e){return e.priority}),function(e){o="".concat(o,"/").concat(encodeURI(e._id))}),o=i?"".concat(o,"/").concat(i):"".concat(o,"/"),"".concat(e).concat(a,"/").concat(r).concat(o)}}},153:function(e,t,r){"use strict";r(30),r(43),r(44),r(10),r(195),r(16),r(126),r(19),r(22),r(50),r(31),r(7),r(12),r(4),r(46),r(23),r(65),r(26),r(21),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0;var f=s(r(1)),a=s(r(0)),n=s(r(5)),i=s(r(2)),o=s(r(3));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g=o.default.Browser=o.default.Browser||{},l=(t.pgBrowser=g).browserTreeState=g.browserTreeState||{};t.browserTreeState=l,f.default.extend(g.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=g.get_preference("browser","browser_tree_state_save_interval");f.default.isUndefined(e)||-1===e.value?f.default.isUndefined(e)||a.default.ajax({url:(0,n.default)("settings.reset_tree_state"),type:"DELETE"}).fail(function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error resetting the tree saved state."'),t)}):(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),g.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),g.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),g.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=g.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&a.default.ajax({url:(0,n.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done(function(){e.last_state=JSON.stringify(e.current_state)}).fail(function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)('Error saving the tree state."'),t)})},fetch_state:function(){var t=this;a.default.ajax({url:(0,n.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done(function(e){t.stored_state=e}).fail(function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,i.default)("Error fetching the tree state."),t)})},update_cache:function(e){var t,r=e&&g.tree.itemData(e),a=(r&&g.Nodes[r._type]).getTreeNodeHierarchy(e),n=g.tree.pathId(e),i=n.join(),o=[],s=-1;if(g.tree.hasParent(e)&&this.parent in a){if(t=a[this.parent]._id,g.tree.isOpen(e)){n.push(r.id),o=n.join(),t in this.current_state||(this.current_state[t]={paths:[],selected:{},conn_status:{},is_opened:{}});var l=f.default.find(this.current_state[t].paths,function(e){return-1!==e.search(o)});f.default.isUndefined(l)&&(f.default.isUndefined(this.current_state[t].paths)?this.current_state[t].paths=[]:s=this.current_state[t].paths.indexOf(i),-1!==s?this.current_state[t].paths[s]=o:this.current_state[t].paths.push(o))}this.update_database_status(e),this.update_current_selected_item(a)}},remove_from_cache:function(e){var a=this,t=a.stored_state||{},n=e&&g.tree.itemData(e),r=n&&g.Nodes[n._type],i=r&&r.getTreeNodeHierarchy(e);if(g.tree.hasParent(e)&&a.parent in i){var o=i&&i[a.parent]._id,s=i&&i[a.orig_parent].id;if(this.update_database_status(e),n._type!=a.parent&&"database"!=n._type){if(g.tree.isClosed(e)){var l=a.current_state[o].paths,u=void 0;if("database"in i&&(u=i.database.id),!f.default.isUndefined(l)&&!f.default.isUndefined(l.length)){var d=0,c=void 0;f.default.each(l,function(e){if(!f.default.isUndefined(e)){var t=e.split(",");if(-1!==t.indexOf(n.id)&&(void 0===u||void 0!==u&&-1!==t.indexOf(u))){var r=t.indexOf(n.id);t.splice(r),(c=t.join())==s?a.current_state[o].paths.splice(e,1):a.current_state[o].paths[d]=c}d++}})}}}else o in t&&"paths"in t[o]&&(t[o].paths=a.current_state[o].paths,a.save_state())}},expand_from_previous_state:function(n){var i=this,o=i.stored_state||{},s=n&&g.tree.itemData(n),e=s&&g.Nodes[s._type],l=e&&e.getTreeNodeHierarchy(n);if(g.tree.hasParent(n)&&i.parent in l&&(s._type!=i.parent||!1!==g.tree.isOpen(n))){var t=o[l[i.parent]._id];if(!("database"==s._type&&t&&"conn_status"in t&&"is_opened"in t)||0!==t.conn_status[s.id]&&0!==t.is_opened[s.id]&&s.id in t.is_opened){if(!f.default.isUndefined(t)&&"paths"in t&&!f.default.isUndefined(t.paths.length)){var r=d(t.paths),u=void 0;"database"in l&&(u=l.database.id),f.default.each(r,function(e){if(!f.default.isUndefined(e)){var t=e.split(",");if(-1!==t.indexOf(s.id)&&(void 0===u||void 0!==u&&-1!==t.indexOf(u))){var r=t.indexOf(s.id);if(g.tree.toggle(n),r==t.length-1){var a=o[l[i.parent]._id].paths.indexOf(e);o[l[i.parent]._id].paths.splice(a,1)}}}})}this.select_tree_item(n)}}},update_database_status:function(e){var t=e&&g.tree.itemData(e),r=(t&&g.Nodes[t._type]).getTreeNodeHierarchy(e);if("database"in r){var a=r.database.id,n=r&&r[this.parent]._id;n in this.current_state&&"selected"in this.current_state[n]&&(r.database.connected?this.current_state[n].conn_status[a]=1:this.current_state[n].conn_status[a]=0,"database"==t._type&&(g.tree.isOpen(e)?this.current_state[n].is_opened[a]=1:this.current_state[n].is_opened[a]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,r=g.tree.itemData(g.tree.selected()),a=void 0;r=r?r.id:void 0,"database"in e&&(a=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!f.default.isUndefined(r)&&(this.current_state[t].selected[e[this.parent].id]=r,f.default.isUndefined(a)||(this.current_state[t].selected[a]=r))}},select_tree_item:function(e){var t=this.stored_state||{},r=e&&g.tree.itemData(e),a=r&&g.Nodes[r._type],n=a&&a.getTreeNodeHierarchy(e),i=t[n[this.parent]._id];if("database"in n){var o=n.database.id;i&&"selected"in i&&o in i.selected&&i.selected[o]==r.id&&g.tree.select(e)}}})},157:function(e,t,r){"use strict";var a,n;r(10),r(16),r(79),r(34),r(4),r(8),r(26),r(6),a=[r(2),r(5),r(0),r(1),r(14),r(15),r(3),r(9),r(25),r(39),r(59)],void 0===(n=function(L,B,I,K,t,V,e,q,G,U){function F(e){var t=e.get("type");if(-1!=t.indexOf("[]"))switch(t.replace("[]","")){case"boolean":return G.Extension.InputBooleanArrayCell;case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return G.Extension.InputIntegerArrayCell;case"real":case"numeric":case"double precision":case"decimal":return G.Extension.InputNumberArrayCell;default:return G.Extension.InputStringArrayCell}else switch(t){case"boolean":return G.BooleanCell.extend({formatter:G.BooleanCellFormatter});case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return null!=e.get("value")&&e.set({value:parseInt(e.get("value"))},{silent:!0}),G.IntegerCell;case"real":case"numeric":case"double precision":case"decimal":return null!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),G.NumberCell;case"string":return G.StringCell;case"date":return G.DateCell;default:return G.Cell}}function R(e){return-1!=e.get("type").indexOf("[]")?G.StringCell:G.BooleanCell}function $(e){return e instanceof t.Model&&e.get("use_default")}function z(e){if(e instanceof t.Model)return-1==e.get("type").indexOf("[]")}var f=window.wcDocker,r=t.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(K.isUndefined(this.get("value"))||K.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var e=L("Please enter a value for the parameter.");return this.errorModel.set("value",e),e}return this.errorModel.unset("value"),null}}),H=t.Collection.extend({model:r});return function(e,t,r,a){V.debuggerInputArgsDialog||V.dialog("debuggerInputArgsDialog",function(){return{main:function(e,t,r,a,n){this.preferences=U.default.pgAdmin.Browser.get_preferences_for_module("debugger"),this.set("title",e),this.set("debug_info",t),this.set("restart_debug",r),this.set("trans_id",n);var i,o,s,l,u,d,c=this.func_args_data=[];if(0==r){var f=q.tree,g=f.selected(),p=g&&1==g.length?f.itemData(g):void 0,_=p&&q.Nodes[p._type];if(!p)return;var b,h=_.getTreeNodeHierarchy.apply(_,[g]);"function"==p._type?b=B("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.function._id}):"procedure"==p._type?b=B("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.procedure._id}):"edbfunc"==p._type?b=B("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.edbfunc._id}):"edbproc"==p._type&&(b=B("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.edbproc._id}))}else b=B("debugger.get_arguments",{sid:t.server_id,did:t.database_id,scid:t.schema_id,func_id:t.function_id});I.ajax({url:b,method:"GET",async:!1}).done(function(e){if(0!=e.data.args_count)for(g=0;g<e.data.result.length;g++)c.push({arg_id:e.data.result[g].arg_id,is_null:e.data.result[g].is_null,is_expression:e.data.result[g].is_expression,use_default:e.data.result[g].use_default,value:e.data.result[g].value})}).fail(function(){V.alert(L("Debugger Error"),L("Unable to fetch the arguments from server"))});var v,m,y,w,k,D,x=G.HeaderCell.extend({className:"width_percent_25"}),T=[],C=[{name:"name",label:L("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:L("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:L("Null?"),type:"boolean",cell:"boolean"},{name:"expr",label:L("Expression?"),type:"boolean",cellFunction:R,editable:z},{name:"value",label:L("Value"),type:"text",editable:!0,cellFunction:F,headerCell:x},{name:"use_default",label:L("Use Default?"),type:"boolean",cell:"boolean",editable:$},{name:"default_value",label:L("Default"),type:"text",editable:!1,cell:"string"}],E=[],S=[],N=this.input_arg_id=[];if(null!=t.proargmodes){var P=t.proargmodes.split(",");for(v=0;v<P.length;v++)("i"==P[v]||"b"==P[v]||a&&"o"==P[v])&&N.push(v)}else{var O=t.proargtypenames.split(",");for(v=0;v<O.length;v++)N.push(v)}if(o=t.proargtypenames.split(","),null!=t.proargmodes&&(s=t.proargmodes.split(",")),t.pronargdefaults&&(l=t.pronargdefaults,u=t.proargdefaults.split(","),d=l),null!=t.proargnames){for(D=(i=t.proargnames.split(",")).length-1;0<=D;D--)null!=t.proargmodes?("i"==s[D]||"b"==s[D]||a&&"o"==s[D])&&(d?(d-=1,T[D]=u[d]):T[D]="<no default>"):d?(d-=1,T[D]=u[d]):T[D]="<no default>";if(0!=o.length)for(g=0;g<o.length;g++)null!=t.proargmodes?("i"==s[g]||"b"==s[g]||a&&"o"==s[g])&&(k=!1,"<no default>"!=T[g]&&(k=!0),E.push({name:i[g],type:o[g],use_default:k,default_value:T[g]})):(k=!1,"<no default>"!=T[g]&&(k=!0),E.push({name:i[g],type:o[g],use_default:k,default_value:T[g]}));if(0!=c.length)for(g=0;g<c.length;g++)null!=t.proargmodes&&"o"==s[g]&&!a||(w=c[g].arg_id,y=[],-1!=o[w].indexOf("[]")?(m=c[g].value.split(","),K.each(m,function(e){y.push({value:e})})):y=c[g].value,S.push({name:i[w],type:o[w],is_null:!!c[g].is_null,expr:!!c[g].is_expression,value:y,use_default:!!c[g].use_default,default_value:T[w]}))}else{var M=[];for(g=0;g<o.length;g++)M[g]="dbgparam"+(g+1);if(t.pronargdefaults){for(D=M.length-1;0<=D;D--)t.proargmodes,d?(d-=1,T[D]=u[d]):T[D]="<No default value>";for(g=0;g<o.length;g++)null==t.proargmodes?(k=!1,"<No default value>"!=T[g]&&(k=!0),E.push({name:M[g],type:o[g],use_default:k,default_value:T[g]})):("i"==s[g]||"b"==s[g]||a&&"o"==s[g])&&(k=!1,"<No default value>"!=T[g]&&(k=!0),E.push({name:M[g],type:o[g],use_default:k,default_value:T[g]}))}else for(g=0;g<o.length;g++)E.push({name:M[g],type:o[g],use_default:!1,default_value:"<No default value>"}),T[g]="<No default value>";if(0!=c.length)for(g=0;g<c.length;g++)w=c[g].arg_id,y=[],-1!=o[w].indexOf("[]")?(m=c[g].value.split(","),K.each(m,function(e){y.push({value:e})})):y=c[g].value,S.push({name:M[w],type:o[w],is_null:!!c[g].is_null,expr:!!c[g].is_expression,value:y,use_default:!!c[g].use_default,default_value:T[w]})}0==c.length?this.debuggerInputArgsColl=new H(E):this.debuggerInputArgsColl=new H(S),this.grid&&(this.grid.remove(),this.grid=null);var A=this.grid=new G.Grid({columns:C,collection:this.debuggerInputArgsColl,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});A.render(),I(this.elements.content).html(A.el);var j=I(A.el).find("input:checkbox").first();j.length&&setTimeout(function(){j.trigger("click")},250)},settings:{debug_info:void 0,restart_debug:void 0,trans_id:void 0},setup:function(){return{buttons:[{text:L("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:L("Debug"),key:13,className:"btn btn-primary fa fa-bug pg-alertify-button"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(e){if(e.button.text===L("Debug")){var i=this;if(0==i.setting("restart_debug")){var t=q.tree,r=t.selected(),o=r&&1==r.length?t.itemData(r):void 0,a=o&&q.Nodes[o._type];if(!o)return;var s=a.getTreeNodeHierarchy.apply(a,[r])}var n,l=[],u=this.sqlite_func_args_list=[],d=0;if(this.grid.collection.each(function(e){var t;(e.get("is_null")?l.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?l.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):l.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==i.setting("restart_debug"))?("function"==o._type?t=s.function._id:"procedure"==o._type?t=s.procedure._id:"edbfunc"==o._type?t=s.edbfunc._id:"edbproc"==o._type&&(t=s.edbproc._id),u.push({server_id:s.server._id,database_id:s.database._id,schema_id:s.schema._id,function_id:t,arg_id:i.input_arg_id[d],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})):u.push({server_id:i.setting("debug_info").server_id,database_id:i.setting("debug_info").database_id,schema_id:i.setting("debug_info").schema_id,function_id:i.setting("debug_info").function_id,arg_id:i.input_arg_id[d],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});d+=1}),0==i.setting("restart_debug"))"function"==o._type?n=B("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.function._id}):"procedure"==o._type?n=B("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.procedure._id}):"edbfunc"==o._type?n=B("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbfunc._id}):"edbproc"==o._type&&(n=B("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbproc._id})),I.ajax({url:n,method:"POST",data:{data:JSON.stringify(l)}}).done(function(t){var e,r=B("debugger.direct",{trans_id:t.data.debuggerTransId});if(i.preferences.debugger_new_browser_tab)window.open(r,"_blank");else{q.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(r)});var a=q.docker.findPanels("properties"),n=q.docker.addPanel("frm_debugger",f.DOCK.STACKED,a[0]);n.focus(),n.on(f.EVENT.CLOSED,function(){var e=B("debugger.close",{trans_id:t.data.debuggerTransId});I.ajax({url:e,method:"DELETE"})})}"function"==o._type?e=B("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.function._id}):"procedure"==o._type?e=B("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.procedure._id}):"edbfunc"==o._type?e=B("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbfunc._id}):"edbproc"==o._type&&(e=B("debugger.set_arguments",{sid:s.server._id,did:s.database._id,scid:s.schema._id,func_id:s.edbproc._id})),I.ajax({url:e,method:"POST",data:{data:JSON.stringify(u)}}).done(function(){}).fail(function(){V.alert(L("Debugger Error"),L("Unable to set the arguments on the server"))})}).fail(function(e){V.alert(L("Debugger Target Initialization Error"),e.responseJSON.errormsg)});else{n=B("debugger.start_listener",{trans_id:i.setting("debug_info").trans_id}),I.ajax({url:n,method:"POST",data:{data:JSON.stringify(l)}}).done(function(){}).fail(function(e){V.alert(L("Debugger Listener Startup Error"),e.responseJSON.errormsg)});var c=B("debugger.set_arguments",{sid:i.setting("debug_info").server_id,did:i.setting("debug_info").database_id,scid:i.setting("debug_info").schema_id,func_id:i.setting("debug_info").function_id});I.ajax({url:c,method:"POST",data:{data:JSON.stringify(u)}}).done(function(){}).fail(function(){V.alert(L("Debugger Error"),L("Unable to set the arguments on the server"))})}return!0}if(e.button.text===L("Cancel"))return I.ajax({method:"DELETE",url:B("debugger.close",{trans_id:this.setting("trans_id")})}),!1},build:function(){V.pgDialogBuild.apply(this)},prepare:function(){var r,e;I(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[1].element.disabled=!0:this.__internal.buttons[1].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",(r=this,function(){for(var e=!1,t=0;t<this.collection.length;t++)if(this.collection.models[t].get("is_null"))e=!(r.__internal.buttons[1].element.disabled=!1);else if(null==this.collection.models[t].get("value")||null==this.collection.models[t].get("value")){if(e=!0,!this.collection.models[t].get("use_default")){r.__internal.buttons[1].element.disabled=!0;break}r.__internal.buttons[1].element.disabled=!1}e||(r.__internal.buttons[1].element.disabled=!1)})),this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:error",(e=this,function(){e.__internal.buttons[1].element.disabled=!0}))}}}),V.debuggerInputArgsDialog(L("Debugger"),e,t,r,a).resizeTo(q.stdW.md,q.stdH.md)}}.apply(t,a))||(e.exports=n)},158:function(e,t,r){"use strict";e.exports={setFocusToDebuggerEditor:function(e,t){t&&9!==(t.which||t.keyCode)&&e.focus()},getFunctionId:function(e){var t;return e&&(e.function&&e.function._id?t=e.function._id:e.edbfunc&&e.edbfunc._id&&(t=e.edbfunc._id)),t},getProcedureId:function(e){var t;return e&&(e.procedure&&e.procedure._id?t=e.procedure._id:e.edbproc&&e.edbproc._id&&(t=e.edbproc._id)),t}}},187:function(e,t,r){"use strict";var a,n;r(16),r(4),r(8),r(83),a=[r(0),r(1)],void 0===(n=function(e,a){return function(e,t){if(a.isUndefined(t)||a.isNull(t))return!0;t.startsWith("coll-")&&(t=t.replace("coll-",""));if(0<=a.indexOf(["server_group","server","catalog_object_column"],t))return!0;var r=e.get_preference("browser","show_node_"+t);return!r||r.value}}.apply(t,a))||(e.exports=n)},190:function(e,f,g){"use strict";(function(n){g(19),g(31),g(11),g(7),g(29),g(48),g(12),g(23),g(49),g(21),g(6),Object.defineProperty(f,"__esModule",{value:!0}),f.pgBrowser=void 0;var a=t(g(3)),i=t(g(5)),o=t(g(0)),s=e(g(15)),l=e(g(69)),r=t(g(39));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function e(e){if(e&&e.__esModule)return e;var t=u();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}}return r.default=e,t&&t.set(e,r),r}function t(e){return e&&e.__esModule?e:{default:e}}var d=g(96),c=a.default.Browser=a.default.Browser||{};f.pgBrowser=c,n.extend(c,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(e,t){var r=this;if(0!=n.size(r.preferences_cache))return n.findWhere(r.preferences_cache,{module:e,name:t});var a=setInterval(function(){if(0<r.preferences_cache.length)return clearInterval(a),n.findWhere(r.preferences_cache,{module:e,name:t})},1e3)},get_preferences_for_module:function(e){var t={};if(n.each(n.where(this.preferences_cache,{module:e}),function(e){t[e.name]=e.value}),0<Object.keys(t).length)return t},get_preference_for_id:function(e){return n.findWhere(this.preferences_cache,{id:e})},cache_preferences:function(t){var r=this,e={};e[a.default.csrf_token_header]=a.default.csrf_token,setTimeout(function(){o.default.ajax({url:(0,i.default)("preferences.get_all"),headers:e}).done(function(e){r.preferences_cache=e,r.preference_version(r.generate_preference_version()),c.keyboardNavigation.init(),c.tree&&(d.modifyAcitreeAnimation(r),d.modifyAlertifyAnimation(r)),c.browserTreeState.init(),t&&("string"==typeof t?o.default.event.trigger("prefchange:"+t):n.each(t,function(e,t){o.default.event.trigger("prefchange:"+t)}))}).fail(function(e,t,r){s.pgRespErrorNotify(e,r)})},500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null==e){var r=t.get_preferences_for_module("sqleditor");(0,o.default)(t.editor.getWrapperElement()).css("font-size",l.calcFontSize(r.sql_font_size)),t.editor.setOption("tabSize",r.tab_size),t.editor.setOption("lineWrapping",r.wrap_code),t.editor.setOption("autoCloseBrackets",r.insert_pair_brackets),t.editor.setOption("matchBrackets",r.brace_matching),t.editor.refresh()}},onPreferencesChange:function(e,t){(0,o.default)(r.default).on("prefchange:"+e,function(e){t(e)})}})}).call(this,g(1))},191:function(e,t){e.exports=i},192:function(e,c,f){"use strict";(function(a){f(19),f(11),f(7),f(29),f(12),f(23),f(49),f(21),f(6),Object.defineProperty(c,"__esModule",{value:!0}),c.pgBrowser=void 0;var e=t(f(3)),n=t(f(5)),i=t(f(0)),r=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}}r.default=e,t&&t.set(e,r);return r}(f(15)),o=t(f(2));f(59);var s=t(f(39));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function t(e){return e&&e.__esModule?e:{default:e}}var u=e.default.Browser=e.default.Browser||{};c.pgBrowser=u;var d=window.wcDocker;a.extend(u,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function(e){var t=e.addPanel("browser",d.DOCK.LEFT),r=e.addPanel("dashboard",d.DOCK.RIGHT,t);e.addPanel("properties",d.DOCK.STACKED,r,{tabOrientation:d.TAB.TOP}),e.addPanel("sql",d.DOCK.STACKED,r),e.addPanel("statistics",d.DOCK.STACKED,r),e.addPanel("dependencies",d.DOCK.STACKED,r),e.addPanel("dependents",d.DOCK.STACKED,r)},save_current_layout:function(e,t){if(t){var r={setting:e,value:t.save()};i.default.ajax({type:"POST",url:(0,n.default)("settings.store_bulk"),data:r})}},restore_layout:function(t,e,r){if(""!=e)try{t.restore(e)}catch(e){t.clear(),r&&r(t)}else r&&r(t);var a=s.default.pgAdmin.Browser,n=setInterval(function(){a.get_preferences_for_module("browser")&&(clearInterval(n),a.reflectLocklayoutChange(t),a.onPreferencesChange("browser",function(){a.reflectLocklayoutChange(t)}))},500)},reflectLocklayoutChange:function(e){var t=s.default.pgAdmin.Browser,r=t.get_preferences_for_module("browser");t.lock_layout(e,r.lock_layout)},lock_layout:function(e,t){var r=this.menus.file.mnu_locklayout.menu_items;switch(t){case this.lock_layout_levels.PREVENT_DOCKING:e.lockLayout(d.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:e.lockLayout(d.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:e.lockLayout(d.LOCK_LAYOUT_LEVEL.NONE)}a.each(r,function(e){e.name!="mnu_lock_"+t?e.change_checked(!1):e.change_checked(!0)})},save_lock_layout:function(e){var t=s.default.pgAdmin.Browser;i.default.ajax({url:(0,n.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:e})}).done(function(){t.cache_preferences("browser")}).fail(function(e,t){r.pgNotifier(t,e,(0,o.default)("Failed to save the lock layout setting."))})},mnu_lock_docking:function(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING),this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function(){this.lock_layout(this.docker,this.lock_layout_levels.FULL),this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function(){this.lock_layout(this.docker,this.lock_layout_levels.NONE),this.save_lock_layout(this.lock_layout_levels.NONE)}})}).call(this,f(1))},194:function(e,t,r){"use strict";r(10),r(19),r(18),r(7),r(29),r(12),r(23),r(49),r(21),r(6);var s=f(r(1)),l=f(r(3)),n=f(r(0)),i=f(r(105)),a=c(r(24)),o=f(r(125)),u=c(r(74));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function c(e){if(e&&e.__esModule)return e;var t=d();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}}return r.default=e,t&&t.set(e,r),r}function f(e){return e&&e.__esModule?e:{default:e}}var g=l.default.Browser=l.default.Browser||{};g.keyboardNavigation=g.keyboardNavigation||{},s.default.extend(g.keyboardNavigation,{init:function(){i.default.reset(),0<g.preferences_cache.length&&(this.keyboardShortcut={file_shortcut:a.parseShortcutValue(g.get_preference("browser","main_menu_file").value),object_shortcut:a.parseShortcutValue(g.get_preference("browser","main_menu_object").value),tools_shortcut:a.parseShortcutValue(g.get_preference("browser","main_menu_tools").value),help_shortcut:a.parseShortcutValue(g.get_preference("browser","main_menu_help").value),left_tree_shortcut:a.parseShortcutValue(g.get_preference("browser","browser_tree").value),tabbed_panel_backward:a.parseShortcutValue(g.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:a.parseShortcutValue(g.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:a.parseShortcutValue(g.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:a.parseShortcutValue(g.get_preference("browser","sub_menu_view_data").value),sub_menu_properties:a.parseShortcutValue(g.get_preference("browser","sub_menu_properties").value),sub_menu_create:a.parseShortcutValue(g.get_preference("browser","sub_menu_create").value),sub_menu_delete:a.parseShortcutValue(g.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:a.parseShortcutValue(g.get_preference("browser","sub_menu_refresh").value),context_menu:a.parseShortcutValue(g.get_preference("browser","context_menu").value),direct_debugging:a.parseShortcutValue(g.get_preference("browser","direct_debugging").value),drop_multiple_objects:a.parseShortcutValue(g.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:a.parseShortcutValue(g.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:a.parseShortcutValue(g.get_preference("browser","add_grid_row").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row}},this.bindShortcuts())},bindShortcuts:function(){var r=this;s.default.each(r.shortcutMethods,function(e,t){r._bindWithMousetrap(e.shortcuts,r[t],e.bindElem)});(0,n.default)(".pg-navbar").on("keydown",function(e){switch(e.keyCode){case 37:r.bindMainMenuLeft(e);break;case 38:r.bindMainMenuUpDown(e,"up");break;case 39:r.bindMainMenuRight(e);break;case 40:r.bindMainMenuUpDown(e,"down")}})},_bindWithMousetrap:function(e,t,r){var a=this;if(i.default.unbind(e),r){var n=document.querySelector(r);(0,i.default)(n).bind(e,function(){t.apply(this,arguments)}.bind(n))}else i.default.bind(e,function(){t.apply(a,arguments)})},unbindShortcuts:function(){s.default.each(this.mousetrapInstances,function(e){e.instance.reset()}),this.mousetrapInstances=[]},bindMainMenu:function(e,t){var r=this.keyboardShortcut;t===r.file_shortcut&&(0,n.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===r.object_shortcut&&(0,n.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===r.tools_shortcut&&(0,n.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===r.help_shortcut&&(0,n.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var r=0,a=l.default.Browser.docker.findPanels().length,n=0,i=!1,o=this.keyboardShortcut;s.default.each(l.default.Browser.docker.findPanels(),function(e,t){e.isVisible()&&!i&&"browser"!==e._type&&(n=t,i=!0)}),t===o.tabbed_panel_backward?r=0<n?n-1:1:t===o.tabbed_panel_forward&&(r=n<a?n+1:a),l.default.Browser.docker.findPanels()[r].focus(),setTimeout(function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()},1e3)},bindMainMenuLeft:function(e){if((0,n.default)(e.target).hasClass("nav-link")){var t=(0,n.default)(e.target).closest(".nav-item");for(u._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if(0<(0,n.default)(e.target).closest(".dropdown-menu").length){var r=(0,n.default)(e.target).closest("li");u._stopEventPropagation(e);var a=r.closest(".dropdown-menu");0<a.closest(".dropdown-submenu").length&&(a.removeClass("show"),a.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),(r=a.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,n.default)(e.target).hasClass("nav-link")){var t=(0,n.default)(e.target).closest(".nav-item");for(u._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if(0<(0,n.default)(e.target).closest(".dropdown-menu").length){var r=(0,n.default)(e.target).closest("li");u._stopEventPropagation(e),r.hasClass("dropdown-submenu")&&(r.addClass("dropdown-submenu-visible"),r.find(".dropdown-menu").addClass("show"),r=r.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if(0<(0,n.default)(e.target).closest(".dropdown-menu").length){u._stopEventPropagation(e);var r=(0,n.default)(e.target).closest("li"),a=(0,n.default)(e.target).closest(".dropdown-menu");for(a.find(".show").removeClass("show"),a.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?r=r.prev():"down"===t&&(r=r.next());r.hasClass("dropdown-divider")||r.find(".dropdown-item").first().hasClass("disabled");)"up"===t?r=r.prev():"down"===t&&(r=r.next());r.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,n.default)("#tree").trigger("focus"),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&l.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&l.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==l.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&l.default.Browser.Node.callbacks.show_obj_properties.call(l.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails();e.d&&!0!==l.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&l.default.Browser.Node.callbacks.show_obj_properties.call(l.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"create"})},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==l.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&l.default.Browser.Node.callbacks.delete_obj.call(l.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=g.keyboardNavigation.getTreeDetails();l.default.Browser.Node.callbacks.refresh.call(l.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),r=(0,n.default)(e.srcElement).find(".aciTreeEntry").position().left+70,a=(0,n.default)(e.srcElement).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,n.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:r,y:a})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||l.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&l.default.Tools.Debugger.get_function_information(l.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&0<(0,n.default)("button.delete_multiple").length&&(0,n.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&0<(0,n.default)("button.delete_multiple_cascade").length&&(0,n.default)("button.delete_multiple_cascade").click()},bindAddGridRow:function(){var e=(0,n.default)(document.activeElement).closest(".object.subnode");(0,n.default)(e).length&&(0,n.default)(e).find(".add").click()},isPropertyPanelVisible:function(){var t=!1;return s.default.each(l.default.Browser.docker.findPanels(),function(e){"properties"===e._type&&(t=e.isVisible())}),t},getTreeDetails:function(){var e=l.default.Browser.tree,t=0<e.selected().length?e.selected():e.first(),r=t&&1===t.length?e.itemData(t):void 0;return{t:e,i:t,d:r}},getDialogTabNavigator:function(e){var t=g.get_preference("browser","dialog_tab_backward").value,r=g.get_preference("browser","dialog_tab_forward").value;return new o.default.dialogTabNavigator(e,t,r)}}),e.exports=l.default.Browser.keyboardNavigation},196:function(e,t,r){"use strict";var a,n;r(10),r(22),r(18),r(11),r(4),r(8),r(6),a=[r(2),r(5),r(0),r(1),r(15),r(3),r(9),r(14),r(25),r(13),r(84),r(157),r(74),r(158),r(39),r(59)],void 0===(n=function(u,s,l,d,c,o,r,f,g,e,t,i,a,p,_){var n=t.default,b=window.wcDocker;null!=o.Browser.tree&&(o=o||window.pgAdmin||{});var h=o.Tools=o.Tools||{};if(h.DirectDebug)return h.DirectDebug;var v=new function(){};d.extend(v,f.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},enable_toolbar_buttons:function(){var e=this;e.enable("stop",!0),e.enable("step_over",!0),e.enable("step_into",!0),e.enable("toggle_breakpoint",!0),e.enable("clear_all_breakpoints",!0),e.enable("continue",!0)},disable_toolbar_buttons:function(){var e=this;e.enable("stop",!1),e.enable("step_over",!1),e.enable("step_into",!1),e.enable("toggle_breakpoint",!1),e.enable("clear_all_breakpoints",!1),e.enable("continue",!1)},set_breakpoint:function(e,t,r){var a=s("debugger.set_breakpoint",{trans_id:e,line_no:t,set_type:r});l.ajax({url:a,method:"GET"}).done(function(e){e.data.status}).fail(function(){c.alert(u("Debugger Error"),u("Error while setting debugging breakpoint."))})},UpdateBreakpoint:function(e){var t=this.GetBreakpointInformation(e);if(1!=t.length||-1!=t[0].linenumber){for(var r,a=new Array,n=0;n<t.length;n++)-1!=t[n].linenumber&&a.push(t[n].linenumber);for(n=0;n<a.length;n++){null!=h.DirectDebug.editor.lineInfo(a[n]-1).gutterMarkers?h.DirectDebug.editor.setGutterMarker(a[n]-1,"breakpoints",null):h.DirectDebug.editor.setGutterMarker(a[n]-1,"breakpoints",(r=void 0,(r=document.createElement("div")).style.color="#822",r.innerHTML="●",r))}}},GetBreakpointInformation:function(e){var t="",r=s("debugger.execute_query",{trans_id:e,query_type:"get_breakpoints"});return l.ajax({url:r,method:"GET",async:!1}).done(function(e){"Success"===e.data.status?t=e.data.result:"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while fetching breakpoint information."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while fetching breakpoint information."))}),t},setActiveLine:function(e){var t=this,r=h.DirectDebug.editor;e&&t.active_line_no&&r.removeLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),!e&&t.active_line_no&&(e=t.active_line_no),0<e&&(t.active_line_no=e,r.addLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),r.centerOnLine(t.active_line_no))},start_execution:function(t,e){var r=this,a=s("debugger.start_execution",{trans_id:t,port_num:e});l.ajax({url:a,method:"GET"}).done(function(e){"Success"===e.data.status?r.execute_query(t):"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while starting debugging session."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while starting debugging session."))})},execute_query:function(t){var r=this,e=s("debugger.execute_query",{trans_id:t,query_type:"wait_for_breakpoint"});l.ajax({url:e,method:"GET"}).done(function(e){"Success"===e.data.status?(null!=e.data.result[0].src&&null!=e.data.result[0].linenumber&&(h.DirectDebug.editor.setValue(e.data.result[0].src),r.setActiveLine(e.data.result[0].linenumber-2)),r.GetStackInformation(t),h.DirectDebug.debug_type&&r.poll_end_execution_result(t)):"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while executing requested debugging information."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while executing requested debugging information."))})},GetLocalVariables:function(t){var r=this,e=s("debugger.execute_query",{trans_id:t,query_type:"get_variables"});l.ajax({url:e,method:"GET"}).done(function(e){"Success"===e.data.status?(r.AddLocalVariables(e.data.result),r.AddParameters(e.data.result),h.DirectDebug.debug_restarted&&(h.DirectDebug.debug_type&&r.poll_end_execution_result(t),h.DirectDebug.debug_restarted=!1)):"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while fetching variable information."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while fetching variable information."))})},GetStackInformation:function(e){var t=this,r=s("debugger.execute_query",{trans_id:e,query_type:"get_stack_info"});l.ajax({url:r,method:"GET"}).done(function(e){"Success"===e.data.status?(t.AddStackInformation(e.data.result),t.GetLocalVariables(h.DirectDebug.trans_id)):"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while fetching stack information."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while fetching stack information."))})},poll_result:function(t){var r=this;if(h.DirectDebug.is_polling_required){var e,a=s("debugger.poll_result",{trans_id:t});e=h.DirectDebug.polling_timeout_idle?1e3:200,setTimeout(function(){l.ajax({url:a,method:"GET",beforeSend:function(e){e.setRequestHeader(o.csrf_token_header,o.csrf_token),l(".debugger-container").addClass("show_progress")}}).done(function(e){l(".debugger-container").removeClass("show_progress"),"Success"===e.data.status?null==e.data.result||0==e.data.result.length?r.poll_result(t):(null!=e.data.result[0].src||null!=e.data.result[0].src?(h.DirectDebug.polling_timeout_idle=!1,h.DirectDebug.docker.finishLoading(50),e.data.result[0].src!=h.DirectDebug.editor.getValue()&&(h.DirectDebug.editor.setValue(e.data.result[0].src),r.UpdateBreakpoint(t)),r.setActiveLine(e.data.result[0].linenumber-2),r.GetStackInformation(t)):h.DirectDebug.debug_type||h.DirectDebug.first_time_indirect_debug?(h.DirectDebug.polling_timeout_idle=!1,h.DirectDebug.docker.finishLoading(50),e.data.result[0].src!=h.DirectDebug.editor.getValue()&&(h.DirectDebug.editor.setValue(e.data.result[0].src),r.UpdateBreakpoint(t)),r.setActiveLine(e.data.result[0].linenumber-2),r.GetStackInformation(t)):(h.DirectDebug.docker.finishLoading(50),r.setActiveLine(-1),r.clear_all_breakpoint(t),r.execute_query(t),h.DirectDebug.first_time_indirect_debug=!0,h.DirectDebug.polling_timeout_idle=!1),setTimeout(function(){r.enable_toolbar_buttons()},500)):"Busy"===e.data.status?(h.DirectDebug.polling_timeout_idle=!0,h.DirectDebug.debug_type||(h.DirectDebug.docker.startLoading(u("Waiting for another session to invoke the target...")),r.disable_toolbar_buttons(),h.DirectDebug.first_time_indirect_debug=!1),r.poll_result(t)):"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while polling result."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while polling result."))})},e)}},update_messages:function(e){e=d.escape(e);var t,r="";r=(t=h.DirectDebug.messages_panel.$container.find(".messages").html())?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,h.DirectDebug.messages_panel.$container.find(".messages").html(r)},poll_end_execution_result:function(t){var r=this;if(h.DirectDebug.is_polling_required){var e,a=s("debugger.poll_end_execution_result",{trans_id:t});e=h.DirectDebug.polling_timeout_idle?1200:250,setTimeout(function(){l.ajax({url:a,method:"GET"}).done(function(e){"Success"===e.data.status?null==e.data.result?(r.setActiveLine(-1),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.polling_timeout_idle=!0,c.success(e.info,3),e.data.status_message&&r.update_messages(e.data.status_message),l(".debugger-container").removeClass("show_progress"),setTimeout(function(){r.enable("stop",!1),r.enable("step_over",!1),r.enable("step_into",!1),r.enable("toggle_breakpoint",!1),r.enable("clear_all_breakpoints",!1),r.enable("continue",!0)},500),h.DirectDebug.is_polling_required=!1):null!=e.data.result&&(r.setActiveLine(-1),r.AddResults(e.data.col_info,e.data.result),h.DirectDebug.results_panel.focus(),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.polling_timeout_idle=!0,c.success(e.info,3),e.data.status_message&&r.update_messages(e.data.status_message),l(".debugger-container").removeClass("show_progress"),setTimeout(function(){r.enable("stop",!1),r.enable("step_over",!1),r.enable("step_into",!1),r.enable("toggle_breakpoint",!1),r.enable("clear_all_breakpoints",!1),r.enable("continue",!0)},500),h.DirectDebug.is_polling_required=!1):"Busy"===e.data.status?(r.poll_end_execution_result(t),e.data.status_message&&r.update_messages(e.data.status_message)):"NotConnected"===e.data.status?c.alert(u("Debugger poll end execution error"),e.data.result):"ERROR"===e.data.status&&(h.DirectDebug.direct_execution_completed=!0,r.setActiveLine(-1),h.DirectDebug.is_user_aborted_debugging||c.error(e.info,3),e.data.status_message&&r.update_messages(e.data.status_message),h.DirectDebug.messages_panel.focus(),l(".debugger-container").removeClass("show_progress"),r.enable("stop",!1),r.enable("step_over",!1),r.enable("step_into",!1),r.enable("toggle_breakpoint",!1),r.enable("clear_all_breakpoints",!1),h.DirectDebug.is_user_aborted_debugging||(r.enable("continue",!0),h.DirectDebug.is_user_aborted_debugging=!1),h.DirectDebug.is_polling_required=!1)}).fail(function(){c.alert(u("Debugger Error"),u("Error while polling result."))})},e)}},Restart:function(a){var n=this,e=s("debugger.restart",{trans_id:a});n.disable_toolbar_buttons(),h.DirectDebug.messages_panel.$container.find(".messages").html(""),l.ajax({url:e}).done(function(e){var t=e.data.restart_debug?1:0;if(h.DirectDebug.polling_timeout_idle=!1,h.DirectDebug.is_polling_required=!0,n.poll_result(a),t&&(h.DirectDebug.debug_restarted=!0),e.data.result.require_input)i(e.data.result,t);else{var r=s("debugger.start_listener",{trans_id:a});l.ajax({url:r,method:"GET"}).done(function(){h.DirectDebug.debug_type&&n.poll_end_execution_result(a)}).fail(function(){c.alert(u("Debugger Error"),u("Error while polling result."))})}}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&c.alert(u("Debugger Error"),t.errormsg)}catch(e){console.warn(e.stack||e)}})},Continue:function(t){var r=this;if(r.disable_toolbar_buttons(),h.DirectDebug.direct_execution_completed&&h.DirectDebug.direct_execution_completed==h.DirectDebug.polling_timeout_idle)r.Restart(t);else{var e=s("debugger.execute_query",{trans_id:t,query_type:"continue"});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status?r.poll_result(t):c.alert(u("Debugger Error"),u("Error while executing continue in debugging session."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while executing continue in debugging session."))})}},Step_over:function(t){var r=this;r.disable_toolbar_buttons();var e=s("debugger.execute_query",{trans_id:t,query_type:"step_over"});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status?r.poll_result(t):c.alert(u("Debugger Error"),u("Error while executing step over in debugging session."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while executing step over in debugging session."))})},Step_into:function(t){var r=this;r.disable_toolbar_buttons();var e=s("debugger.execute_query",{trans_id:t,query_type:"step_into"});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status?r.poll_result(t):c.alert(u("Debugger Error"),u("Error while executing step into in debugging session."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while executing step into in debugging session."))})},Stop:function(e){var t=this;t.disable_toolbar_buttons();var r=s("debugger.execute_query",{trans_id:e,query_type:"abort_target"});l.ajax({url:r,method:"GET"}).done(function(e){e.data.status?(t.setActiveLine(-1),h.DirectDebug.direct_execution_completed=!0,h.DirectDebug.is_user_aborted_debugging=!0,h.DirectDebug.is_polling_required=!1,t.enable("continue",!1),c.success(e.info,3)):"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while executing stop in debugging session."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while executing stop in debugging session."))})},toggle_breakpoint:function(e){var r=this;r.disable_toolbar_buttons();var t="";t=null==h.DirectDebug.editor.lineInfo(r.active_line_no).gutterMarkers?s("debugger.set_breakpoint",{trans_id:e,line_no:r.active_line_no+1,set_type:"1"}):s("debugger.set_breakpoint",{trans_id:e,line_no:r.active_line_no+1,set_type:"0"}),l.ajax({url:t,method:"GET"}).done(function(e){var t;e.data.status?(null!=h.DirectDebug.editor.lineInfo(r.active_line_no).gutterMarkers?h.DirectDebug.editor.setGutterMarker(r.active_line_no,"breakpoints",null):h.DirectDebug.editor.setGutterMarker(r.active_line_no,"breakpoints",((t=document.createElement("div")).style.color="#822",t.innerHTML="●",t)),r.enable_toolbar_buttons()):"NotConnected"===e.data.status&&c.alert(u("Debugger Error"),u("Error while toggling breakpoint."))}).fail(function(){c.alert(u("Debugger Error"),u("Error while toggling breakpoint."))})},clear_all_breakpoint:function(e){var a=this,t=a.GetBreakpointInformation(e);if(1!=t.length||-1!=t[0].linenumber){a.disable_toolbar_buttons();for(var n=new Array,r=0;r<t.length;r++)-1!=t[r].linenumber&&n.push(t[r].linenumber);var i=s("debugger.clear_all_breakpoint",{trans_id:e});l.ajax({url:i,method:"POST",data:{breakpoint_list:n.join()}}).done(function(e){if(e.data.status)for(var t=0;t<n.length;t++){var r=h.DirectDebug.editor.lineInfo(n[t]-1);r&&null!=r.gutterMarkers&&h.DirectDebug.editor.setGutterMarker(n[t]-1,"breakpoints",null)}a.enable_toolbar_buttons()}).fail(function(){c.alert(u("Debugger Error"),u("Error while clearing all breakpoint."))})}},AddStackInformation:function(e){var t=this;t.stack_grid&&(t.stack_grid.remove(),t.stack_grid=null);for(var r=f.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),a=f.Collection.extend({model:r}),n=[{name:"name",label:u("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:u("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:u("Line No."),type:"text",editable:!1,cell:"string"}],i=[],o=0;o<e.length;o++)i.push({frame_id:o,name:e[o].targetname,value:e[o].args,line_no:e[o].linenumber});var s=this.stackColl=new a(i);this.stackColl.on("backgrid:row:selected",t.select_frame,t);var l=this.stack_grid=new g.Grid({emptyText:"No data found",columns:n,row:g.Row.extend({events:{click:"rowClick"},rowClick:function(){t.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),t.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:s,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});l.render(),h.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(l.el)},AddResults:function(e,t){this.result_grid&&(this.result_grid.remove(),this.result_grid=null);var r=f.Model.extend({defaults:{name:void 0}}),a=f.Collection.extend({model:r}),n=[];d.size(e)&&d.each(e,function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,n.push(t)});var i=this.result_grid=new g.Grid({emptyText:"No data found",columns:n,collection:new a(t),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});i.render(),h.DirectDebug.results_panel.$container.find(".debug_results").append(i.el)},AddLocalVariables:function(e){var t=this;t.variable_grid&&(t.variable_grid.remove(),t.variable_grid=null);var r=f.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=f.Collection.extend({model:r});a.prototype.on("change",t.deposit_parameter_value,t);var n=[{name:"name",label:u("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:u("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:u("Value"),type:"text",cell:"string"}],i=[];if(0!=e.length)for(var o=0;o<e.length;o++)"L"==e[o].varclass&&i.push({name:e[o].name,type:e[o].dtype,value:e[o].value});var s=this.variable_grid=new g.Grid({emptyText:"No data found",columns:n,collection:new a(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});s.collection.on("backgrid:edited",function(e,t,r){p.setFocusToDebuggerEditor(h.DirectDebug.editor,r)}),s.render(),h.DirectDebug.local_variables_panel.$container.find(".local_variables").append(s.el)},AddParameters:function(e){var t=this;t.param_grid&&(t.param_grid.remove(),t.param_grid=null);var r=f.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=t.ParametersCollection=f.Collection.extend({model:r});a.prototype.on("change",t.deposit_parameter_value,t);var n=[{name:"name",label:u("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:u("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:u("Value"),type:"text",cell:"string"}],i=[];if(0!=e.length)for(var o=0;o<e.length;o++)"A"==e[o].varclass&&i.push({name:e[o].name,type:e[o].dtype,value:e[o].value});var s=this.param_grid=new g.Grid({emptyText:"No data found",columns:n,collection:new a(i),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});s.collection.on("backgrid:edited",function(e,t,r){p.setFocusToDebuggerEditor(h.DirectDebug.editor,r)}),s.render(),h.DirectDebug.parameters_panel.$container.find(".parameters").append(s.el)},deposit_parameter_value:function(e){var t=this,r=[];r.push({name:e.get("name"),type:e.get("type"),value:e.get("value")});var a=s("debugger.deposit_value",{trans_id:h.DirectDebug.trans_id});l.ajax({url:a,method:"POST",data:{data:JSON.stringify(r)}}).done(function(e){e.data.status&&(t.GetLocalVariables(h.DirectDebug.trans_id),e.data.result?c.success(e.data.info,3):c.error(e.data.info,3))}).fail(function(){c.alert(u("Debugger Error"),u("Error while depositing variable value."))})},select_frame:function(){var t=this,e=s("debugger.select_frame",{trans_id:h.DirectDebug.trans_id,frame_id:t.frame_id});l.ajax({url:e,method:"GET"}).done(function(e){e.data.status&&(h.DirectDebug.editor.setValue(e.data.result[0].src),t.UpdateBreakpoint(h.DirectDebug.trans_id),t.setActiveLine(e.data.result[0].linenumber-2),t.GetLocalVariables(h.DirectDebug.trans_id))}).fail(function(){c.alert(u("Debugger Error"),u("Error while selecting frame."))})}});function m(){}var y=f.View.extend({el:".debugger_main_container",initialize:function(){v.on("pgDebugger:button:state:stop",this.enable_stop,this),v.on("pgDebugger:button:state:step_over",this.enable_step_over,this),v.on("pgDebugger:button:state:step_into",this.enable_step_into,this),v.on("pgDebugger:button:state:continue",this.enable_continue,this),v.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),v.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){v.Stop(h.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){v.clear_all_breakpoint(h.DirectDebug.trans_id)},on_toggle_breakpoint:function(){v.toggle_breakpoint(h.DirectDebug.trans_id)},on_continue:function(){v.Continue(h.DirectDebug.trans_id)},on_step_over:function(){v.Step_over(h.DirectDebug.trans_id)},on_step_into:function(){v.Step_into(h.DirectDebug.trans_id)},keyAction:function(e){var t;t=a.processEventDebugger(this.$el,e,this.preferences,h.DirectDebug.docker),d.isNull(t)||d.isUndefined(t)||""==t||setTimeout(function(){r.Events.trigger("pgadmin:debugger:".concat(t,":focus"))},100)}});return d.extend(m.prototype,{load:function(t,e,r,a){var n=this;if(d.bindAll(h.DirectDebug,"messages"),!this.initialized){var i;this.initialized=!0,this.trans_id=t,this.debug_type=e,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0,this.function_name_with_arguments=r,this.layout=a;var o=_.default.pgAdmin.Browser;this.preferences=o.get_preferences_for_module("debugger"),this.docker=new b("#container",{allowContextMenu:!1,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:s("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],null==t||e?null!=t&&e?(i=s("debugger.start_listener",{trans_id:t}),l.ajax({url:i,method:"GET"}).done(function(e){e.data.status&&n.messages(t)}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&c.alert(u("Debugger Error"),t.errormsg)}catch(e){c.alert(u("Debugger Error"),u("Error while starting debugging listener."))}})):this.intializePanels():(i=s("debugger.start_listener",{trans_id:t}),l.ajax({url:i,method:"GET"}).done(function(e){e.data.status&&(n.intializePanels(),v.enable_toolbar_buttons(),v.poll_result(t))}).fail(function(e){try{var t=JSON.parse(e.responseText);0==t.success&&c.alert(u("Debugger Error"),t.errormsg)}catch(e){c.alert(u("Debugger Error"),u("Error while starting debugging listener."))}}))}},messages:function(t){var r=this,e=s("debugger.messages",{trans_id:t});l.ajax({url:e,method:"GET"}).done(function(e){"Success"===e.data.status?(r.intializePanels(),v.enable_toolbar_buttons(),v.start_execution(t,e.data.result)):"Busy"===e.data.status?r.messages(t):"NotConnected"===e.data.status&&c.alert(u("Not connected to server or connection with the server has been closed."),e.data.result)}).fail(function(){c.alert(u("Debugger Error"),u("Error while fetching messages information."))})},onBreakPoint:function(e,t,r){var a;if("breakpoints"==r&&!h.DirectDebug.polling_timeout_idle){var n=e.lineInfo(t);null==n.gutterMarkers?v.set_breakpoint(this.trans_id,t+1,1):null==n.gutterMarkers.breakpoints?v.set_breakpoint(this.trans_id,t+1,1):v.set_breakpoint(this.trans_id,t+1,0);var i=n.gutterMarkers;null!=i&&null==n.gutterMarkers.breakpoints&&(i=n.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",i?null:((a=document.createElement("div")).style.color="#822",a.innerHTML="●",a))}},buildDefaultLayout:function(e){var t=e.addPanel("code",b.DOCK.TOP),r=e.addPanel("parameters",b.DOCK.BOTTOM,t);e.addPanel("local_variables",b.DOCK.STACKED,r,{tabOrientation:b.TAB.TOP}),e.addPanel("messages",b.DOCK.STACKED,r),e.addPanel("results",b.DOCK.STACKED,r),e.addPanel("stack_pane",b.DOCK.STACKED,r)},intializePanels:function(){var i=this;this.registerPanel("code",i.function_name_with_arguments,"100%","50%",function(){var e=new o.Browser.Panel({name:"parameters",title:u("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),t=new o.Browser.Panel({name:"local_variables",title:u("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),r=new o.Browser.Panel({name:"messages",title:u("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="messages" class="messages" tabindex="0"></div>'}),a=new o.Browser.Panel({name:"results",title:u("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),n=new o.Browser.Panel({name:"stack_pane",title:u("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});e.load(i.docker),t.load(i.docker),r.load(i.docker),a.load(i.docker),n.load(i.docker)}),r.restore_layout(i.docker,i.layout,this.buildDefaultLayout.bind(this)),i.docker.on(b.EVENT.LAYOUT_CHANGED,function(){r.save_current_layout("Debugger/Layout",i.docker)}),i.code_editor_panel=i.docker.findPanels("code")[0],i.parameters_panel=i.docker.findPanels("parameters")[0],i.local_variables_panel=i.docker.findPanels("local_variables")[0],i.messages_panel=i.docker.findPanels("messages")[0],i.results_panel=i.docker.findPanels("results")[0],i.stack_pane_panel=i.docker.findPanels("stack_pane")[0];var e=l('<div id="stack_editor_pane" class="pg-panel-content info"></div>'),t=l('<textarea id="debugger-editor-textarea"></textarea>').appendTo(e);i.code_editor_panel.layout().addItem(e),i.editor=n.fromTextArea(t.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:o.Browser.editor_shortcut_keys,indentWithTabs:o.Browser.editor_options.indent_with_tabs,indentUnit:o.Browser.editor_options.tabSize,tabSize:o.Browser.editor_options.tabSize,lineWrapping:o.Browser.editor_options.wrapCode,autoCloseBrackets:o.Browser.editor_options.insert_pair_brackets,matchBrackets:o.Browser.editor_options.brace_matching}),n.on(i.editor,"keydown",function(e,t){27==t.keyCode&&document.activeElement.blur()}),r.Events.on("pgadmin:debugger:code:focus",function(){i.editor.focus()});i.docker.startLoading(u("Loading...")),i.docker.on(b.EVENT.LOADED,function(){i.docker.finishLoading(100),i.docker.off(b.EVENT.LOADED),i.editor.on("gutterClick",i.onBreakPoint.bind(i),i),i.docker.$container&&i.docker.$container.parent().focus();var t=setInterval(function(){try{if(0<_.default.pgAdmin.Browser.preference_version()&&(clearInterval(t),i.reflectPreferences(),i.preferences.debugger_new_browser_tab)){r.bind_beforeunload();var e=setInterval(function(){_.default.pgAdmin?i.reflectPreferences():clearInterval(e)},1e3)}}catch(e){throw clearInterval(t),e}},0)}),this.toolbarView=new y,l(window).on("keydown",function(e){i.toolbarView.keyAction&&i.toolbarView.keyAction(e)}),_.default.pgAdmin.Browser.onPreferencesChange("debugger",function(){i.reflectPreferences()})},reflectPreferences:function(){var e=this,t=_.default.pgAdmin.Browser;e.preferences=t.get_preferences_for_module("debugger"),e.toolbarView.preferences=e.preferences,e.toolbarView.$el.find("#btn-step-into").attr("title",a.shortcut_accesskey_title("Step into",e.preferences.btn_step_into)).attr("accesskey",a.shortcut_key(e.preferences.btn_step_into)),e.toolbarView.$el.find("#btn-step-over").attr("title",a.shortcut_accesskey_title("Step over",e.preferences.btn_step_over)).attr("accesskey",a.shortcut_key(e.preferences.btn_step_over)),e.toolbarView.$el.find("#btn-continue").attr("title",a.shortcut_accesskey_title("Continue/Start",e.preferences.btn_start)).attr("accesskey",a.shortcut_key(e.preferences.btn_start)),e.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",a.shortcut_accesskey_title("Toggle breakpoint",e.preferences.btn_toggle_breakpoint)).attr("accesskey",a.shortcut_key(e.preferences.btn_toggle_breakpoint)),e.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",a.shortcut_accesskey_title("Clear all breakpoints",e.preferences.btn_clear_breakpoints)).attr("accesskey",a.shortcut_key(e.preferences.btn_clear_breakpoints)),e.toolbarView.$el.find("#btn-stop").attr("title",a.shortcut_accesskey_title("Stop",e.preferences.btn_stop)).attr("accesskey",a.shortcut_key(e.preferences.btn_stop))},registerPanel:function(t,r,a,n,i){var o=this;this.docker.registerPanelType(t,{title:r,isPrivate:!0,onCreate:function(e){(o.panels[t]=e).initSize(a,n),r?e.title(r):e.title(!1),e.closeable(!1),e.layout().addItem(l('<div tabindex="0">',{class:"pg-debugger-panel"})),i&&i.apply(o,[e])}})}}),h.DirectDebug=new m,h.DirectDebug.jquery=l,h.DirectDebug}.apply(t,a))||(e.exports=n)},2:function(e,t,r){"use strict";var a,n;r(22),r(38),r(4),r(26),a=[r(93)],void 0===(n=function(a){return function(e){var t=a[e]?a[e]:e;if(1==arguments.length)return t;try{var r=arguments;return t.split("%s").map(function(e,t){return 0<t?t<r.length?[r[t],e].join(""):["%s",e].join(""):e}).join("")}catch(e){return console.error(e),t}}}.apply(t,a))||(e.exports=n)},24:function(e,t,r){"use strict";r(10),r(16),r(22),r(38),r(31),r(7),r(34),r(4),r(142),r(8),r(65),r(26),r(6),Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=function(e){var t="";e.alt&&(t+="alt+");e.shift&&(t+="shift+");e.control&&(t+="ctrl+");return t+=e.key.char.toLowerCase()},t.findAndSetFocus=function(t){if(0==t.length)return;setTimeout(function(){var e=t.find("button.fa-plus:first");0==e.length&&(e=t.find("\n          .pgadmin-controls:first input:enabled,\n          .pgadmin-controls:first .btn:not(.toggle),\n          .CodeMirror-scroll").find('*[tabindex]:not([tabindex="-1"])')),0<e.length?e[0].focus():t[0].focus()},200)},t.getEpoch=function(e){var t=e||new Date;return parseInt(t.getTime()/1e3)},t.getGCD=function(e){function r(e,t){return 0==e?t:r(t%e,e)}var t=e.length;if(t<=2)return r(e[0],e[1]);for(var a=e[0],n=1;n<t;n++)a=r(e[n],a);return a},t.getMod=function(e,t){return(e%t+t)%t},t.parseFuncParams=function(e){var t=[],r="",a="";if(e.endsWith("()"))r=e.substring(0,e.length-2);else if(e.endsWith(")")){if(!e.endsWith("()")&&e.endsWith(")")){var n=0,i=e.length;for(n=e.length-2;0<=n;){if("("==e[n]){i=n;break}if('"'==e[n])for(n--;'"'!=e[n];)n--;n--}r=e.substring(0,i),a=e.substring(i+1,e.length-1);var o=0,s="",l=["IN","OUT","INOUT","VARIADIC"];for(o=n=0;n<a.length;){if('"'==a[n])for(n++;'"'!=a[n];)n++;else" "==a[n]?(""==s||-1<l.indexOf(s))&&(s=a.substring(o,n),o=n+1):","==a[n]&&(t.push([s,a.substring(o,n)]),s="",o=n+1);n++}t.push([s,a.substring(o)])}}else r=e;return{func_name:r,param_string:a,params:t}},t.quote_ident=o,t.fully_qualify=function(e,t,r){var a=i.getTreeNodeHierarchyFromIdentifier.call(e,r),n="";void 0!==a.schema?n=o(a.schema._label):void 0!==a.view?n=o(a.view._label):void 0!==a.catalog&&(n=o(a.catalog._label));void 0!==a.package&&"package"!=t._type&&(""==n?n=o(a.package._label):n+="."+o(a.package._label));return""!=n?n+"."+o(t._label):o(t._label)},t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.titleize=function(e){return e.split(" ").map(function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()}).join(" ")},t.sprintf=function(t){try{var r=arguments;return t.split("%s").map(function(e,t){return 0<t?t<r.length?[r[t],e].join(""):["%s",e].join(""):e}).join("")}catch(e){return console.error(e),t}},t.isString=t.isFunction=t.isValidData=void 0;var a,n=(a=r(1))&&a.__esModule?a:{default:a},i=r(57);t.isValidData=function(e){return!n.default.isUndefined(e)&&!n.default.isNull(e)};t.isFunction=function(e){return n.default.isFunction(e)};function o(e){var t=!1;return isNaN(parseInt(e))||(t=!0),-1<e.search(/[^a-z0-9_]/g)&&(e=e.replace(/"/g,'""'),t=!0),t?'"'.concat(e,'"'):e}t.isString=function(e){return n.default.isString(e)}},3:function(r,a,n){"use strict";(function(e){var t;function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(30),n(43),n(44),n(19),n(73),n(31),n(12),n(79),n(34),n(4),n(46),n(23),n(62),n(8),n(26),n(21),void 0===(t=function(){var e=window.pgAdmin=window.pgAdmin||{};function r(e,t,r){return void 0===r||0==+r?Math[e](t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-r:-r)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+r:r))))}return function(e,t,u){function d(e,t,r,a){r=r||"width";var n,i,o,s=(t.match(_)||[])[2],l="px"===s?1:b[s+"toPx"];if(l||/r?em/i.test(s)&&!a)e=l?e:"rem"===s?g:"fontSize"===r&&e.parentNode||e,l=l||parseFloat(c(e,"fontSize")),o=parseFloat(t)*l;else{i=(n=e.style)[r];try{n[r]=t}catch(e){return 0}o=n[r]?parseFloat(c(e,r)):0,n[r]=i!==u?i:null}return o}function c(e,t){var r,a,n,i,o,s=["paddingTop","paddingBottom","borderTop","borderBottom"],l=4;if(a=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)],"%"===(n=((r=p?p(e)[t]:a?a+"px":"fontSize"===t?d(e,"1em","left",1)+"px":e.currentStyle[t]).match(_)||[])[2])&&f)if(/^top|bottom/.test(t)){for(i=(o=e.parentNode||e).offsetHeight;l--;)i-=parseFloat(c(o,s[l]));r=parseFloat(r)/100*i+"px"}else r=d(e,r);else("auto"===r||n&&"px"!==n)&&p?r=0:n&&"px"!==n&&!p&&(r=d(e,r)+"px");return r}var f,r=t.createElement("test"),g=t.documentElement,a=t.defaultView,p=a&&a.getComputedStyle,_=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,b={},n=[1/25.4,1/2.54,1/72,1/6],i=["mm","cm","pt","pc","in","mozmm"],o=6;for(g.appendChild(r),p&&(r.style.marginTop="1%",f="1%"===p(r).marginTop);o--;)b[i[o]+"toPx"]=n[o]?n[o]*b.inToPx:d(r,"1"+i[o]);g.removeChild(r),r=u,e.toPx=d}(e,window.document),e.natural_sort=function(e,t,r){r=r||{};function a(e){return r.insensitive&&(""+e).toLowerCase()||""+e}var n,i,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,d=/^0/,c=a(e).replace(s,"")||"",f=a(t).replace(s,"")||"",g=c.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),_=parseInt(c.match(u))||1!==g.length&&c.match(l)&&Date.parse(c),b=parseInt(f.match(u))||_&&f.match(l)&&Date.parse(f)||null,h=r.desc?-1:1;if(b){if(_<b)return-1*h;if(b<_)return 1*h}for(var v=0,m=Math.max(g.length,p.length);v<m;v++){if(n=!(g[v]||"").match(d)&&parseFloat(g[v])||g[v]||0,i=!(p[v]||"").match(d)&&parseFloat(p[v])||p[v]||0,isNaN(n)!==isNaN(i))return(isNaN(n)?1:-1)*h;if(y(n)!==y(i)&&(n+="",i+=""),n<i)return-1*h;if(i<n)return 1*h}return 0},Math.round10||(Math.round10=function(e,t){return r("round",e,t)}),Math.floor10||(Math.floor10=function(e,t){return r("floor",e,t)}),Math.ceil10||(Math.ceil10=function(e,t){return r("ceil",e,t)}),e}.apply(a,[]))||(r.exports=t)}).call(this,n(3))},39:function(e,t,r){"use strict";r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){var t=null;try{t=window.opener&&window.opener.pgAdmin?window.opener:window.parent&&window.parent.pgAdmin?window.parent:window.top&&window.top.pgAdmin?window.top:window}catch(e){t=window}return t}();t.default=a},5:function(e,t,r){"use strict";var a,n;r(4),r(8),a=[r(94)],void 0===(n=function(a){return function(e,n){var t=a[e],r=t;return t?r=r.replace(/([<])([^:^>]*:)?([^>]+)([>])/g,function(e,t,r,a){return a in n?n[a]:e}):t}}.apply(t,a))||(e.exports=n)},57:function(e,t,r){"use strict";(function(l){function a(e){var t,r,a=0,n=0,i={};do{var o=e.getData();if(o._type in this.Nodes&&this.Nodes[o._type].hasId){var s=(t=o._type,r=n,"partition"===t&&0<r?"table":t);void 0===i[s]&&(i[s]=l.extend({},o,{priority:a}),a-=1)}n+=1,e=e.hasParent()?e.parent():null}while(e);return i}r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeHierarchyFromElement=function(e,t){return a.call(e,t)},t.getTreeNodeHierarchyFromIdentifier=function(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e),r=this.treeMenu.findNode(t);return a.call(this,r)},t.getTreeNodeHierarchy=a}).call(this,r(1))},69:function(e,t,r){"use strict";var a,n;r(22),r(73),r(141),r(4),r(8),a=[r(0),r(1),r(2),r(5)],void 0===(n=function(r,a,s,l){var u={epicRandomString:function(e){for(var t=[],r="0123456789abcdef",a=0;a<36;a++)t[a]=r.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=r.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,r=e.length,a=0;a<r;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t},calculateColumnWidth:function(e){r("body").append('<span id="pg_text" style="visibility: hidden;">'+e+"</span>");var t=r("#pg_text").width()+23;return r("#pg_text").remove(),t},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},previousStatus:null,fetchConnectionStatus:function(e,n,i){var t=l("sqleditor.connection_status",{trans_id:e.transId});if("visible"===document.visibilityState&&"visible"===n.data("panel-visible")&&!i.hasClass("obtaining-conn")){var o=e;r.ajax({url:t,method:"GET"}).done(function(e){if(e&&e.data){var t=e.data.status,r=e.data.message,a=!1;switch(o.update_notifications(e.data.notifies),t){case 1:t!=u.previousStatus||i.hasClass("fa-hourglass-half")||(i.removeClass().addClass("fa fa-hourglass-half"),a=!0);break;case 2:u.previousStatus==t||i.hasClass("fa-clock-o")||(i.removeClass().addClass("fa fa-clock-o"),a=!0);break;case 3:u.previousStatus==t||i.hasClass("fa-exclamation-circle")||(i.removeClass().addClass("fa fa-exclamation-circle"),a=!0);break;case 4:u.previousStatus==t||i.hasClass("fa-exclamation-triangle")||(i.removeClass().addClass("fa fa-exclamation-triangle"),a=!0);break;default:u.previousStatus==t||i.hasClass("fa-query_tool_connected")||(i.removeClass().addClass("fa-custom fa-query-tool-connected"),a=!0)}u.previousStatus=t,a&&(n.popover("hide"),n.attr("data-content",r))}else u.previousStatus=-99,r=s("An unexpected error occurred - ensure you are logged into the application."),n.attr("data-content",r),i.hasClass("fa-query-tool-disconnected")||(n.popover("hide"),i.removeClass().addClass("fa-custom fa-query-tool-disconnected"))}).fail(function(e){u.previousStatus=-1;var t=s("Transaction status check failed.");0==e.readyState?t=s("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),n.attr("data-content",t),i.hasClass("fa-query-tool-disconnected")||(n.popover("hide"),i.removeClass().addClass("fa-custom fa-query-tool-disconnected"))})}},updateConnectionStatusFlag:function(e){var t=r(".connection_status");t.data("panel-visible")!=e&&t.data("panel-visible",e)},calcFontSize:function(e){if(e){var t=Number(Math.round(e+"e+2")+"e-2");if(0<t)return t+"em"}return"1em"},addEditableIcon:function(e,t){var r={cssClass:"editable-column-header-icon",content:t?'<i class="fa fa-pencil"></i>':'<i class="fa fa-lock"></i>'};a.isUndefined(e.header)||a.isUndefined(e.header.buttons)?e.header={buttons:[r]}:e.header.buttons.push(r)}};return u}.apply(t,a))||(e.exports=n)},74:function(e,t,r){"use strict";r(35),r(10),r(7),r(4),r(65),Object.defineProperty(t,"__esModule",{value:!0}),t.processEventDebugger=function(e,t,r,a){var n,i,o="";this.validateShortcutKeys(r.edit_grid_values,t)?(this._stopEventPropagation(t),(n=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")')).length&&(i=(0,y.default)(n).find("td.editable:first")).length&&i.trigger("click")):this.validateShortcutKeys(r.move_next,t)?(this._stopEventPropagation(t),o=S(a,"right")):this.validateShortcutKeys(r.move_previous,t)?(this._stopEventPropagation(t),o=S(a,"left")):this.validateShortcutKeys(r.switch_panel,t)&&(this._stopEventPropagation(t),o=S(a,"switch"));return o},t.processEventQueryTool=function(e,t,r,a){if(e.isQueryRunning())return;var n=r.which||r.keyCode,i="",o=e.preferences.execute_query,s=e.preferences.explain_query,l=e.preferences.explain_analyze_query,u=e.preferences.download_csv,d=e.preferences.move_next,c=e.preferences.move_previous,f=e.preferences.switch_panel,g=e.preferences.toggle_case,p=e.preferences.commit_transaction,_=e.preferences.rollback_transaction,b=e.preferences.save_data;if(this.validateShortcutKeys(o,r))this._stopEventPropagation(r),t.executeQuery(e);else if(this.validateShortcutKeys(s,r))this._stopEventPropagation(r),t.explain(e);else if(this.validateShortcutKeys(l,r))this._stopEventPropagation(r),t.explainAnalyze(e);else if(this.validateShortcutKeys(u,r))this._stopEventPropagation(r),t.download(e);else if(this.validateShortcutKeys(g,r))this._stopEventPropagation(r),t.toggleCaseOfSelectedText(e);else if(this.validateShortcutKeys(p,r))e.is_transaction_buttons_disabled||(this._stopEventPropagation(r),t.executeCommit(e));else if(this.validateShortcutKeys(_,r))e.is_transaction_buttons_disabled||(this._stopEventPropagation(r),t.executeRollback(e));else if(this.validateShortcutKeys(b,r))this._stopEventPropagation(r),t.saveDataChanges(e);else if((this.isMac()&&r.metaKey||!this.isMac()&&r.ctrlKey)&&!r.altKey&&r.shiftKey&&n===k)this._stopEventPropagation(r),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&n===k)this._stopEventPropagation(r),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&n===w)this._stopEventPropagation(r),t.uncommentLineCode(e);else if(n==D)t.focusOut(e),(0,y.default)(r.target).hasClass("dropdown-item")&&0<(0,y.default)(r.target).closest(".dropdown-submenu").length&&(0,y.default)(r.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(d,r))this._stopEventPropagation(r),i=S(a,"right");else if(this.validateShortcutKeys(c,r))this._stopEventPropagation(r),i=S(a,"left");else if(this.validateShortcutKeys(f,r))this._stopEventPropagation(r),i=S(a,"switch");else if(n===T||n===E){if(0<(0,y.default)(r.target).closest(".dropdown-menu").length){this._stopEventPropagation(r);var h=(0,y.default)(r.target).closest("li");for((0,y.default)(r.target).closest(".dropdown-menu").find(".show").removeClass("show"),n===T?h=h.prev():n===E&&(h=h.next());h.hasClass("dropdown-divider")||h.hasClass("d-none")||h.find(".dropdown-item").first().hasClass("disabled");)n===T?h=h.prev():n===E&&(h=h.next());h.find(".dropdown-item").trigger("focus")}}else if((n===x||n===C)&&0<(0,y.default)(r.target).closest(".dropdown-menu").length){this._stopEventPropagation(r);var v=(0,y.default)(r.target).closest("li");if(n===C)v.hasClass("dropdown-submenu")&&(v.find(".dropdown-menu").addClass("show"),v=v.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(n===x){var m=v.closest(".dropdown-menu");0<m.closest(".dropdown-submenu").length&&(m.removeClass("show"),(v=m.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}}return i},t.focusDockerPanel=S,t.validateShortcutKeys=function(e,t){if(!e)return!1;var r=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==r},t._stopEventPropagation=function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.isMac=function(){return-1!=window.navigator.platform.search("Mac")},t.isKeyCtrlAlt=function(e){return e.ctrlKey||e.altKey},t.isKeyAltShift=function(e){return e.altKey||e.shiftKey},t.isKeyCtrlShift=function(e){return e.ctrlKey||e.shiftKey},t.isKeyCtrlAltShift=function(e){return e.ctrlKey||e.altKey||e.shiftKey},t.isAltShiftBoth=function(e){return e.altKey&&e.shiftKey&&!e.ctrlKey},t.isCtrlShiftBoth=function(e){return e.ctrlKey&&e.shiftKey&&!e.altKey},t.isCtrlAltBoth=function(e){return e.ctrlKey&&e.altKey&&!e.shiftKey},t.shortcut_key=i,t.shortcut_title=function(e,t){var r="";if(null==t)return r;t.alt&&(r=(0,a.default)("Alt")+"+");t.shift&&(r+=(0,a.default)("Shift")+"+");t.control&&(r+=(0,a.default)("Ctrl")+"+");return r+=i(t),"".concat(e," (").concat(r,")")},t.shortcut_accesskey_title=function(e,t){return"".concat(e," (").concat((0,a.default)("accesskey")," + ").concat(i(t),")")};var y=n(r(0)),a=n(r(2)),l=r(24);function n(e){return e&&e.__esModule?e:{default:e}}var w=190,k=191,D=27,x=37,T=38,C=39,E=40;function i(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function S(e,t){if(e){if(!e._focusFrame){if(0==e._frameList.length&&0==e._frameList[0]._panelList.length)return;e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var r=e._focusFrame,a=0,n=!1;if("switch"==t){var i=0,o=e._frameList.length;for(i=0;i<o&&r!==e._frameList[i];i++);a=(r=e._frameList[(0,l.getMod)(i+1,o)])._curTab,n=!0}else"left"==t?(a=(0,l.getMod)(r._curTab-1,r._panelList.length),n=!1):"right"==t&&(a=(0,l.getMod)(r._curTab+1,r._panelList.length),n=!1);var s=r._panelList[a];return s.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus"),s.focus(n),s._type}}},93:function(e,t){e.exports=r},94:function(e,t){e.exports=a},96:function(e,t,r){"use strict";r(10);var a=o(r(0)),n=o(r(1)),i=o(r(39));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={modifyAcitreeAnimation:function(e,t){var r=e.get_preference("browser","enable_acitree_animation").value;n.default.isUndefined(t)&&(t=e.tree),r?t.options({animateRoot:!0,unanimated:!1,show:n.default.extend(t.options().show,{duration:75}),hide:n.default.extend(t.options().hide,{duration:75}),view:n.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:n.default.extend(t.options().show,{duration:0}),hide:n.default.extend(t.options().hide,{duration:0}),view:n.default.extend(t.options().view,{duration:0})})},modifyAlertifyAnimation:function(e){(n.default.isUndefined(e)||n.default.isNull(e))&&(e=i.default.pgAdmin.Browser),e.get_preference("browser","enable_alertify_animation").value?((0,a.default)(document).find("body").removeClass("alertify-no-animation"),n.default.each(document.getElementsByTagName("iframe"),function(e){(0,a.default)(e.contentDocument).find("body").removeClass("alertify-no-animation")})):((0,a.default)(document).find("body").addClass("alertify-no-animation"),n.default.each(document.getElementsByTagName("iframe"),function(e){(0,a.default)(e.contentDocument).find("body").addClass("alertify-no-animation")}))}}}}).default});